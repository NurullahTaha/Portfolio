generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id       String @id @default(cuid())
  email    String @unique
  password String
}

model Category {
  id          String  @id @default(cuid())
  name        String  @unique
  slug        String  @unique
  photos      Photo[]
  createdAt   DateTime @default(now())
}

model Photo {
  id          String   @id @default(cuid())
  url         String
  title       String?
  description String?
  category    Category? @relation(fields: [categoryId], references: [id])
  categoryId  String?
  
  // Flags for specific display logic
  isFavorite  Boolean  @default(false) // For Home page "Perfect Photos"
  isCover     Boolean  @default(false) // The top photo of the "Folder"
  isSneakPeek Boolean  @default(false) // The photo underneath the "Folder"
  
  createdAt   DateTime @default(now())
}

model Gear {
  id           String   @id @default(cuid())
  name         String
  type         String   // e.g. "Camera", "Lens", "Accessory"
  description  String?
  purchaseDate DateTime?
  retireDate   DateTime? // If null, it's current gear
  isCurrent    Boolean   @default(true)
}

model Product {
  id          String   @id @default(cuid())
  name        String
  description String?
  price       Int      // Stored in cents (e.g., $10.00 = 1000)
  imageBefore String?  // For Presets: The "Before" shot
  imageAfter  String   // The main product image (or "After" shot)
  category    String   // "Preset" or "Print"
  downloadUrl String?  // Link to the file (if digital)
  createdAt   DateTime @default(now())
}